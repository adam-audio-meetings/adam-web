<!-- <div class="d-flex justify-content-center"> -->
<!-- <button (click)="sendButtonClick()">Enviar</button> -->
<div class="page-container">
  <div class="sidebar">
    <div class="team-date-container">

      <div class="team-date-item">

        <!-- <span id="meetingAudiosDate">Data</span> -->
        <form class="form-inline">
          <div class="form-group">
            <div class="input-group">
              <input class="form-control" placeholder="yyyy-mm-dd" [(ngModel)]="selectedDateModel" name="dp"
                (dateSelect)="getAudios($event)" ngbDatepicker #d="ngbDatepicker">
              <div class="input-group-append">
                <button class="btn btn-secondary calendar" (click)="d.toggle()" type="button">
                  <i class="bi bi-calendar-event"></i>
                </button>
              </div>
            </div>
          </div>
        </form>

      </div>

      <div class="team-date-item">

        <!-- <span id="teamName">Equipe</span> -->
        <div ngbDropdown placement="bottom-right" class="d-inline-block">
          <button class="btn btn-secondary" id="dropdownTeams" ngbDropdownToggle>{{ selectedTeamName }}</button>
          <div ngbDropdownMenu aria-labelledby="dropdownTeams">
            <button ngbDropdownItem *ngFor="let team of ownTeams$ | async" (click)="selectedTeamName = team.name;
                      selectedTeamId = team._id;
                      changeTeam()">
              {{ team.name }}</button>
          </div>
        </div>
      </div>


    </div>
    <hr class="team-name-division">
    <div>
      <ul class="list-group">
        <li class="list-group-item" *ngFor="let audio of audios$ | async">
          <div class="audio-member-container">

            <div class="audio-member-avatar">
              <img src="../../../assets/img/avatar/member0.png" alt="">
            </div>

            <div class="audio-member-info">
              <!-- | userFilter:roleFilter"> -->
              <p class="audio-member-name">{{ audio.member.name | titlecase }}</p>
              <!-- <p class="audio-member-date">{{audio.fileId }}</p> -->
              <p class="audio-member-date">{{ audio.created_at | date : 'd/MM HH:mm' }}</p>
            </div>

            <!-- <button class="btn btn-primary btn-sm mr-1 mb-1" routerLink="edit/{{user._id}}">Editar</button> -->
            <!-- <button class="btn btn-danger btn-sm mr-1 mb-1" (click)="deleteUser(user._id)">Excluir</button> -->
            <!-- TODO: buscar link api por environment -->
            <!-- TODO: type dinâmico -->
            <div class="audio-member-player">
              <audio id="{{ audio._id }}" controls="true" class="audio-member" type="audio/webm; codecs=opus"
                src="http://localhost:3000/audio-in-db/{{ audio.fileId }}"
                (ended)="listenAudioEnded(audio._id)"></audio>

            </div>
          </div>

        </li>
      </ul>
    </div>
  </div>

  <div class="main-container">

    <div class="modeSelection">
      <div class="btn-group btn-group-sm btn-group-toggle" ngbRadioGroup name="radioBasic" [(ngModel)]="textOnly">
        <label ngbButtonLabel class="btn-outline-secondary" ngbTooltip="Selecione para digitar e enviar somente texto"
          [openDelay]="800">
          <input ngbButton type="radio" [value]="1" (click)="sendOnlyText()">Texto
        </label>
        <label ngbButtonLabel class="btn-outline-secondary"
          ngbTooltip="Selecione para gravar áudio e enviar junto com a transcrição" [openDelay]="800">
          <input ngbButton type="radio" [value]="0">Áudio + Texto
        </label>
      </div>
    </div>

    <div class="mainPlayer">

      <div class="main-audio-player-container">
        <audio id="main-audio-player"></audio>
      </div>
      <div>
        <button id="record" class="btn btn-danger record main-controls-button m-1"><i id="iconRecord"
            class="bi bi-mic-fill"></i></button>
        <button id="stop" class="btn btn-secondary stop main-controls-button m-1"><i
            class="bi bi-stop-fill"></i></button>
        <button id="discardButton" class="btn btn-secondary main-controls-button m-1"><i
            class="bi bi-trash"></i></button>
        <button id="uploadButton" class="btn btn-success main-controls-button m-1" (click)="sendButtonClick()">
          <i class="bi bi-upload"></i>
        </button>
        <!-- <button id="testPlayback" class="button">Teste Playback</button> -->
      </div>
    </div>



    <div class="transcriptArea">
      <!-- <h4>Transcrição</h4> -->
      <!-- <h5 id="transcript_result">{{ transcript }}</h5> -->
      <div class="transcriptControls">
        <div>
          <button class="btn btn-secondary btn-sm mr-1 mb-1" ngbTooltip="Editar transcrição" [openDelay]="800"
            (click)="editTranscript()">
            <i class="bi bi-pencil-square"></i>
          </button>
        </div>
        <div>

        </div>
      </div>


      <textarea type="text" name="transcriptName" id="transcriptTextarea" cols="100" rows="7" maxlength="1000"
        placeholder="Veja aqui a transcrição do seu áudio e faça correções se necessário ou somente digite o texto sem gravar áudio."
        [(ngModel)]="transcript">
      </textarea>

    </div>

    <div class="inputDevicesArea">

      <div ngbDropdown placement="top-center" class="d-inline-block">
        <button class="btn btn-light" id="inputDevices" ngbDropdownToggle>{{ selectedInputDeviceLabel }}</button>
        <div ngbDropdownMenu aria-labelledby="dropdownInputDevices">
          <button ngbDropdownItem *ngFor="let device of inputDevices" (click)="selectedInputDeviceLabel = device.label;
          selectedInputDeviceValue = device.value">
            {{ device.label }}</button>
        </div>
      </div>

    </div>
  </div>
</div>